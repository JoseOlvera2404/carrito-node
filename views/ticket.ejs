<%- include("partials/header", { title: "Ticket de compra", user }) %>

<h2>Ticket de compra #<%= compra.id %></h2>
<p>Fecha: <%= compra.fecha %></p>

<table style="width:100%; border-collapse: collapse; margin-top: 20px;">
    <tr style="background: #eeeeee;">
        <th>Producto</th>
        <th>Imagen</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Total</th>
    </tr>

    <% compra.items.forEach(item => { %>
        <tr>
            <td><%= item.nombre %></td>
            <td>
                <% if (item.imagen) { %>
                    <img src="/<%= item.imagen %>" alt="<%= item.nombre %>" style="width:60px; height:60px; object-fit:cover; border-radius:5px;">
                <% } else { %>
                    -
                <% } %>
            </td>
            <td><%= item.cantidad %></td>
            <td>$<%= Number(item.precio).toFixed(2) %></td>
            <td>$<%= (Number(item.precio) * item.cantidad).toFixed(2) %></td>
        </tr>
    <% }) %>
</table>

<h3>Total pagado: $<%= Number(compra.total).toFixed(2) %></h3>

<%- include("partials/footer") %>
